{% extends "base.html" %}
{% block title %}Adreslerim | HemenYe{% endblock %}
{% block content %}
<div class="row g-3">
  <div class="col-md-7">
    <div class="card glass">
      <div class="card-body">
        <div class="section-title">
          <h5>Adreslerim</h5>
          <small class="text-muted">Varsayılan adres siparişe otomatik eklenir.</small>
        </div>
        {% if addresses %}
          <div class="list-group list-group-flush">
            {% for a in addresses %}
              <div class="list-group-item">
                <div class="d-flex justify-content-between align-items-center">
                  <div>
                    <div class="fw-semibold">{{ a.title }}</div>
                    <div class="text-muted small">{{ a.address_line }}</div>
                  </div>
                  {% if a.is_default %}
                    <span class="badge bg-success">Varsayılan</span>
                  {% endif %}
                </div>
              </div>
            {% endfor %}
          </div>
        {% else %}
          <p class="text-muted mb-0">Henüz adres eklemediniz.</p>
        {% endif %}
      </div>
    </div>
  </div>
  <div class="col-md-5">
    <div class="card glass">
      <div class="card-body">
        <h5 class="mb-3">Yeni Adres</h5>
        <form method="POST">
          <div class="mb-3">
            <label class="form-label">Başlık</label>
            <input class="form-control" name="title" placeholder="Ev / İş">
          </div>
          <div class="mb-3">
            <label class="form-label">Adres Satırı</label>
            <textarea class="form-control" name="address_line" rows="3" required></textarea>
          </div>
          <div class="mb-3">
            <label class="form-label">Mahalle</label>
            {% if neighborhoods %}
              <select class="form-select" name="neighborhood_id" required>
                <option value="">Seçin</option>
                {% for n in neighborhoods %}
                  <option value="{{ n.id }}">{{ n.name }}</option>
                {% endfor %}
              </select>
            {% else %}
              <input class="form-control" name="neighborhood_name" placeholder="Mahalle adı girin" required>
              <div class="form-text">Liste boşsa mahalleyi elle ekleyebilirsin.</div>
            {% endif %}
          </div>
          <div class="form-check mb-3">
            <input class="form-check-input" type="checkbox" value="1" id="is_default" name="is_default">
            <label class="form-check-label" for="is_default">Varsayılan yap</label>
          </div>
          <button class="btn btn-primary w-100" type="submit">Adres Ekle</button>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}
